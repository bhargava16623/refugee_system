{"ast":null,"code":"import _regeneratorRuntime from \"/Users/gowthambujju/Gowtham/developement/reactapp/Refugee_git/refugee_system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/gowthambujju/Gowtham/developement/reactapp/Refugee_git/refugee_system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n//import { useEffect } from \"react\";\nimport Web3 from \"web3\"; //import React from \"react\";\n\nimport Refugeeabi from '../../abis/Refugee.json';\nvar selectedAccount;\nvar Refugeecont;\nvar isInitialized = false;\n\nvar Weeb3 =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var provider, web3, networkId, contractaddr;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            provider = window.ethereum; //const providerURL = process.env.PROVIDERURL || \"http://localhost:8545\";\n            // used to connect Metamask with our App\n\n            if (typeof provider !== 'undefined') {\n              provider.request({\n                method: 'eth_requestAccounts'\n              }).then(function (accounts) {\n                console.log(accounts);\n              }).catch(function (err) {\n                console.log(err);\n                return;\n              });\n            }\n\n            window.ethereum.on('accountschanged', function (accounts) {\n              selectedAccount = accounts[0];\n              console.log(\"Select Account is changed to \".concat(selectedAccount));\n            });\n            web3 = new Web3(provider);\n            _context.next = 6;\n            return web3.eth.net.getId();\n\n          case 6:\n            networkId = _context.sent;\n            contractaddr = Refugeeabi.networks[networkId].address;\n            Refugeecont = new web3.eth.Contract(Refugeeabi.abi, contractaddr);\n            isInitialized = true;\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function Weeb3() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Weeb3;\nexport var createUser =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (isInitialized) {\n              _context2.next = 3;\n              break;\n            }\n\n            _context2.next = 3;\n            return Weeb3();\n\n          case 3:\n            return _context2.abrupt(\"return\", Refugeecont.methods.createUser('gowtham0210', 'Gowtham', 'S', '9080980256', '02-10-2002', 20, 'Indian', 'M').send({\n              from: selectedAccount\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function createUser() {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/gowthambujju/Gowtham/developement/reactapp/Refugee_git/refugee_system/src/components/comps/weeb3.js"],"names":["Web3","Refugeeabi","selectedAccount","Refugeecont","isInitialized","Weeb3","provider","window","ethereum","request","method","then","accounts","console","log","catch","err","on","web3","eth","net","getId","networkId","contractaddr","networks","address","Contract","abi","createUser","methods","send","from"],"mappings":";;AAAA;AACA,OAAOA,IAAP,MAAiB,MAAjB,C,CACA;;AACA,OAAOC,UAAP,MAAwB,yBAAxB;AACA,IAAIC,eAAJ;AACA,IAAIC,WAAJ;AACA,IAAIC,aAAa,GAAG,KAApB;;AACA,IAAOC,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAEPC,YAAAA,QAFO,GAEIC,MAAM,CAACC,QAFX,EAIX;AAIA;;AACA,gBAAG,OAAOF,QAAP,KAAoB,WAAvB,EAAmC;AAC/BA,cAAAA,QAAQ,CAACG,OAAT,CAAiB;AAACC,gBAAAA,MAAM,EAAC;AAAR,eAAjB,EAAiDC,IAAjD,CAAsD,UAAAC,QAAQ,EAAG;AAC7DC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACP,eAFG,EAGHG,KAHG,CAGG,UAACC,GAAD,EAAQ;AACXH,gBAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ;AACA;AACC,eAND;AAOH;;AAEDT,YAAAA,MAAM,CAACC,QAAP,CAAgBS,EAAhB,CAAmB,iBAAnB,EAAsC,UAASL,QAAT,EAAkB;AACpDV,cAAAA,eAAe,GAAGU,QAAQ,CAAC,CAAD,CAA1B;AACAC,cAAAA,OAAO,CAACC,GAAR,wCAA4CZ,eAA5C;AACH,aAHD;AAKMgB,YAAAA,IAxBK,GAwBE,IAAIlB,IAAJ,CAASM,QAAT,CAxBF;AAAA;AAAA,mBA0BaY,IAAI,CAACC,GAAL,CAASC,GAAT,CAAaC,KAAb,EA1Bb;;AAAA;AA0BLC,YAAAA,SA1BK;AA4BLC,YAAAA,YA5BK,GA4BWtB,UAAU,CAACuB,QAAX,CAAoBF,SAApB,EAA+BG,OA5B1C;AA8BVtB,YAAAA,WAAW,GAAG,IAAIe,IAAI,CAACC,GAAL,CAASO,QAAb,CAAsBzB,UAAU,CAAC0B,GAAjC,EAAqCJ,YAArC,CAAd;AAEAnB,YAAAA,aAAa,GAAG,IAAhB;;AAhCU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAALC,KAAK;AAAA;AAAA;AAAA,GAAZ;;AAuCA,eAAeA,KAAf;AAEA,OAAO,IAAMuB,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG;AAAA;AAAA;AAAA;AAAA;AAAA,gBAClBxB,aADkB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAEZC,KAAK,EAFO;;AAAA;AAAA,8CAIfF,WAAW,CAAC0B,OAAZ,CAAoBD,UAApB,CACH,aADG,EAEH,SAFG,EAGH,GAHG,EAIH,YAJG,EAKH,YALG,EAMF,EANE,EAOF,QAPE,EAQF,GARE,EASLE,IATK,CASA;AAAEC,cAAAA,IAAI,EAAE7B;AAAR,aATA,CAJe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAV0B,UAAU;AAAA;AAAA;AAAA,GAAhB","sourcesContent":["//import { useEffect } from \"react\";\nimport Web3 from \"web3\";\n//import React from \"react\";\nimport Refugeeabi from  '../../abis/Refugee.json';\nlet selectedAccount;\nlet Refugeecont;\nlet isInitialized = false;\nconst  Weeb3 = async ()=> {\n\n    let provider = window.ethereum;\n\n    //const providerURL = process.env.PROVIDERURL || \"http://localhost:8545\";\n\n    \n\n    // used to connect Metamask with our App\n    if(typeof provider !== 'undefined'){\n        provider.request({method:'eth_requestAccounts'}).then(accounts =>{\n            console.log(accounts);\n    })\n    .catch((err) =>{\n        console.log(err);\n        return;\n        })\n    }\n\n    window.ethereum.on('accountschanged', function(accounts){\n        selectedAccount = accounts[0];\n        console.log(`Select Account is changed to ${selectedAccount}`);\n    });\n\n    const web3 = new Web3(provider);\n\n    const networkId = await web3.eth.net.getId();\n\n    const contractaddr =  Refugeeabi.networks[networkId].address;\n\n     Refugeecont = new web3.eth.Contract(Refugeeabi.abi,contractaddr);\n     \n     isInitialized = true;\n\n\n\n\n};\n\nexport default Weeb3;\n\nexport const createUser = async()=>{\n    if(!isInitialized){\n        await Weeb3();\n    }\n    return Refugeecont.methods.createUser(\n        'gowtham0210',\n        'Gowtham',\n        'S',\n        '9080980256',\n        '02-10-2002',\n         20,\n         'Indian',\n         'M'\n    ).send({ from: selectedAccount })\n}"]},"metadata":{},"sourceType":"module"}